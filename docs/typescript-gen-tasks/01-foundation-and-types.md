# 01: Foundation & Type System

**Priority:** P0 (First)
**Depends on:** Nothing
**Complexity:** Medium

---

## Goal
Set up TypeScript generator with YAML parsing and complete type mapping system.

---

## What to Build

### 1. Generator Structure
Create generator module that outputs a single `index.ts` file with header:
```typescript
/**
 * This client was automatically generated by RudderTyper. ** Do Not Edit **
 */
```

### 2. YAML Parsing
Parse these files from tracking plan:
- `tracking-plan.yaml` → event rules
- `events.yaml` → event definitions
- `properties.yaml` → property definitions
- `custom-types.yaml` → custom type definitions

Resolve all `$ref` references (e.g., `$ref: "#/properties/typer-test/some-string"`).

### 3. Naming Utilities
| Function | Input | Output |
|----------|-------|--------|
| toCamelCase | `"Some Track Event"` | `someTrackEvent` |
| toPascalCase | `"Some Track Event"` | `SomeTrackEvent` |
| sanitize | `"$Variable$String"` | `VariableString` |
| reservedWord | `"class"` | `_class` |

### 4. Type Mapping

**Primitives:**
| YAML | TypeScript |
|------|------------|
| `string` | `string` |
| `integer` | `number` |
| `number` | `number` |
| `boolean` | `boolean` |
| `null` | `null` |
| `object` | `Record<string, any>` |
| `array` | `T[]` |

**Multi-type:** `"string,integer,boolean"` → `string | number | boolean`

### 5. Property Types
Generate `Property{Name}` type alias for each property:
```yaml
# Input
- id: "some-string"
  name: "someString"
  type: "string"
  description: "some string property"
```
```typescript
// Output
/** some string property */
type PropertySomeString = string;
```

### 6. Enum Types (Union Types)
Generate union types, NOT TypeScript enums:
```yaml
# Input
propConfig:
  enum: ["GET", "PUT", "POST"]
```
```typescript
// Output - CORRECT
type PropertyMethod = 'GET' | 'PUT' | 'POST';

// NOT this - WRONG
enum PropertyMethod { S_GET = 'GET', ... }
```

### 7. Array Types
```yaml
# Simple array
type: "array"
propConfig:
  itemTypes: ["string"]
```
```typescript
type PropertyTags = string[];
```

```yaml
# Multi-type array
propConfig:
  itemTypes: ["string", "integer"]
```
```typescript
type PropertyMixed = (string | number)[];
```

---

## Test Data Location
```
cli/internal/typer/plan/testdata/project/
```

---

## Acceptance Criteria
- [ ] Generator creates valid `index.ts` with header
- [ ] All YAML files parse without errors
- [ ] `$ref` references resolve correctly
- [ ] Naming functions handle all cases
- [ ] All primitive types map correctly
- [ ] Property types generate as `Property{Name}` aliases
- [ ] Enums generate as union types (NOT TS enums)
- [ ] Arrays generate with correct item types
- [ ] Multi-type properties generate as unions
