# Validation Rules (Legacy v0.1)

> **Spec Version:** rudder/0.1 (also rudder/v0.1)
> **Latest Version:** [rudder/v1](../validation-rules.md)

This document describes validation rules for the legacy `rudder/0.1` spec format.

## Differences from v1

The v0.1 spec format differs from v1 in the following ways:

| Aspect | v0.1 | v1 |
|--------|------|-----|
| Reference format | `#/<kind>/<group>/<id>` | `#<kind>:<id>` |
| Tracking plan event | Object with `$ref` | Direct string reference |
| Property references | `$ref` field | `property` field |

---

## Table of Contents

- [Global](#global)
- [Properties](#properties)
- [Events](#events)
- [Categories](#categories)
- [Custom Types](#custom-types)
- [Tracking Plans](#tracking-plans)
- [Event Stream](#event-stream)
- [RETL](#retl)

---

## Global

### project/metadata-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** metadata syntax must be valid

**Available in:** [v1](../validation-rules.md#projectmetadata-syntax-valid) | [v0.1](./#projectmetadata-syntax-valid)

See [v1 documentation](../validation-rules.md#projectmetadata-syntax-valid) for full details.

---

### project/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** spec syntax must be valid

**Available in:** [v1](../validation-rules.md#projectspec-syntax-valid) | [v0.1](./#projectspec-syntax-valid)

See [v1 documentation](../validation-rules.md#projectspec-syntax-valid) for full details.

---

### project/spec-values-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** spec kind and version must be valid and supported

**Available in:** [v1](../validation-rules.md#projectspec-values-valid) | [v0.1](./#projectspec-values-valid)

See [v1 documentation](../validation-rules.md#projectspec-values-valid) for full details.

---

### project/duplicate-local-id

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** local IDs must be unique within each kind

**Available in:** [v1](../validation-rules.md#projectduplicate-local-id) | [v0.1](./#projectduplicate-local-id)

See [v1 documentation](../validation-rules.md#projectduplicate-local-id) for full details.

---

## Properties

### datacatalog/properties/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** property spec syntax must be valid

**Available in:** [v1](../validation-rules.md#datacatalogpropertiesspec-syntax-valid) | [v0.1](./#datacatalogpropertiesspec-syntax-valid)

See [v1 documentation](../validation-rules.md#datacatalogpropertiesspec-syntax-valid) for full details.

---

### datacatalog/properties/config-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** property config must be valid for the given type

**Available in:** [v1](../validation-rules.md#datacatalogpropertiesconfig-valid) | [v0.1](./#datacatalogpropertiesconfig-valid)

See [v1 documentation](../validation-rules.md#datacatalogpropertiesconfig-valid) for full details.

---

### datacatalog/properties/semantic-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** property references must resolve to existing resources

**Available in:** [v1](../validation-rules.md#datacatalogpropertiessemantic-valid) | [v0.1](./#datacatalogpropertiessemantic-valid)

See [v1 documentation](../validation-rules.md#datacatalogpropertiessemantic-valid) for full details.

---

## Events

### datacatalog/events/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** event spec syntax must be valid

**Available in:** [v1](../validation-rules.md#datacatalogeventsspec-syntax-valid) | [v0.1](./#datacatalogeventsspec-syntax-valid)

See [v1 documentation](../validation-rules.md#datacatalogeventsspec-syntax-valid) for full details.

---

## Categories

### datacatalog/categories/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** category spec syntax must be valid

**Available in:** [v1](../validation-rules.md#datacatalogcategoriesspec-syntax-valid) | [v0.1](./#datacatalogcategoriesspec-syntax-valid)

See [v1 documentation](../validation-rules.md#datacatalogcategoriesspec-syntax-valid) for full details.

---

### datacatalog/categories/semantic-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** category names must be unique across the catalog

**Available in:** [v1](../validation-rules.md#datacatalogcategoriessemantic-valid) | [v0.1](./#datacatalogcategoriessemantic-valid)

See [v1 documentation](../validation-rules.md#datacatalogcategoriessemantic-valid) for full details.

---

## Custom Types

### datacatalog/custom-types/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** custom type spec syntax must be valid

**Available in:** [v1](../validation-rules.md#datacatalogcustom-typesspec-syntax-valid) | [v0.1](./#datacatalogcustom-typesspec-syntax-valid)

See [v1 documentation](../validation-rules.md#datacatalogcustom-typesspec-syntax-valid) for full details.

---

### datacatalog/custom-types/config-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** custom type config must be valid for the given type

**Available in:** [v1](../validation-rules.md#datacatalogcustom-typesconfig-valid) | [v0.1](./#datacatalogcustom-typesconfig-valid)

See [v1 documentation](../validation-rules.md#datacatalogcustom-typesconfig-valid) for full details.

---

### datacatalog/custom-types/semantic-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** custom type references must resolve to existing resources

**Available in:** [v1](../validation-rules.md#datacatalogcustom-typessemantic-valid) | [v0.1](./#datacatalogcustom-typessemantic-valid)

See [v1 documentation](../validation-rules.md#datacatalogcustom-typessemantic-valid) for full details.

---

## Tracking Plans

### datacatalog/tracking-plans/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** tracking plan spec syntax must be valid

**Available in:** [v1](../validation-rules.md#datacatalogtracking-plansspec-syntax-valid) | [v0.1](./#datacatalogtracking-plansspec-syntax-valid)

**v0.1-Specific Notes:**

In v0.1, tracking plan event references use an object with `$ref`:

```yaml
# v0.1 format
rules:
  - id: signup_rule
    type: event_rule
    event:
      $ref: "#/events/user-events/signup"
```

See [v1 documentation](../validation-rules.md#datacatalogtracking-plansspec-syntax-valid) for full details.

---

### datacatalog/tracking-plans/semantic-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** tracking plan references must resolve to existing resources

**Available in:** [v1](../validation-rules.md#datacatalogtracking-planssemantic-valid) | [v0.1](./#datacatalogtracking-planssemantic-valid)

See [v1 documentation](../validation-rules.md#datacatalogtracking-planssemantic-valid) for full details.

---

## Event Stream

### event-stream/source/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** event stream source spec syntax must be valid

**Available in:** [v1](../validation-rules.md#event-streamsourcespec-syntax-valid) | [v0.1](./#event-streamsourcespec-syntax-valid)

See [v1 documentation](../validation-rules.md#event-streamsourcespec-syntax-valid) for full details.

---

### event-stream/source/semantic-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** event stream source references must resolve to existing resources

**Available in:** [v1](../validation-rules.md#event-streamsourcesemantic-valid) | [v0.1](./#event-streamsourcesemantic-valid)

See [v1 documentation](../validation-rules.md#event-streamsourcesemantic-valid) for full details.

---

## RETL

### retl/sqlmodel/spec-syntax-valid

![Severity: Error](https://img.shields.io/badge/severity-error-red)

**Description:** retl sql model spec syntax must be valid

**Available in:** [v1](../validation-rules.md#retlsqlmodelspec-syntax-valid) | [v0.1](./#retlsqlmodelspec-syntax-valid)

See [v1 documentation](../validation-rules.md#retlsqlmodelspec-syntax-valid) for full details.

---

## Reference Patterns (v0.1)

In v0.1 specs, use the legacy reference format:

| Resource | Pattern | Example |
|----------|---------|---------|
| Property | `#/properties/<group>/<id>` | `#/properties/user-props/user_id` |
| Event | `#/events/<group>/<id>` | `#/events/core-events/page_viewed` |
| Custom Type | `#/custom-types/<group>/<id>` | `#/custom-types/address-types/Address` |
| Category | `#/categories/<group>/<id>` | `#/categories/event-cats/User Actions` |
| Tracking Plan | `#/tp/<group>/<id>` | `#/tp/tracking-plans/Main TP` |

---

## Migration

To migrate from v0.1 to v1, run:

```bash
rudder project migrate
```

This will convert all specs to the v1 format while preserving functionality.
